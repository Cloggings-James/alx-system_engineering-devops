#!/bin/bash

# Check if the script is running with root privileges
if [[ $EUID -ne 0 ]]; then
    echo "This script must be run as root. Please use sudo or run as root."
    exit 1
fi

# Backup the original hosts file
cp /etc/hosts /etc/hosts.backup

# Update localhost resolution to 127.0.0.2
sed -i 's/^127.0.0.1[[:space:]]*localhost/127.0.0.2 localhost/' /etc/hosts

# Update facebook.com resolution to 8.8.8.8
sed -i 's/^.*facebook.com[[:space:]]*$/8.8.8.8 facebook.com/' /etc/hosts

echo "Configuration complete. Updated /etc/hosts:"
cat /etc/hosts

# Flush the DNS cache (for systems using systemd-resolve)
systemd-resolve --flush-caches

# Flush the DNS cache (for systems using nscd)
if command -v nscd >/dev/null 2>&1; then
    nscd -i hosts
fi

